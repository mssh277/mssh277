<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Choose Your Pain</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617, #020617 60%, #000 100%);
      color: #e5e7eb;
    }

    .app {
      width: 100%;
      max-width: 420px;
      margin: 10px auto 24px;
      padding: 16px 14px 22px;
      background: #020617;
      border-radius: 18px;
      border: 1px solid #1f2937;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.7);
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .identity {
      font-size: 13px;
      color: #a5b4fc;
      margin-bottom: 10px;
    }

    .mantra-box {
      padding: 10px 12px 12px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(96, 165, 250, 0.4);
      margin-bottom: 12px;
      position: relative;
    }

    .mantra-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #60a5fa;
      margin-bottom: 4px;
    }

    .mantra-text {
      font-size: 13px;
      line-height: 1.4;
    }

    .mantra-button {
      position: absolute;
      right: 8px;
      top: 8px;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: none;
      background: #111827;
      color: #e5e7eb;
      cursor: pointer;
      border: 1px solid rgba(96, 165, 250, 0.6);
    }

    .mantra-button:active {
      transform: scale(0.96);
    }

    .section-title {
      font-size: 13px;
      font-weight: 600;
      margin: 12px 0 4px;
    }

    .section-sub {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 8px;
    }

    .stats-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
    }

    .stat-card {
      flex: 1;
      background: #020617;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid #1f2937;
    }

    .stat-label {
      font-size: 10px;
      color: #9ca3af;
      margin-bottom: 3px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .stat-value {
      font-size: 17px;
      font-weight: 600;
    }

    .date-small {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    textarea {
      width: 100%;
      min-height: 70px;
      border-radius: 10px;
      border: 1px solid #374151;
      padding: 8px 10px;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      resize: vertical;
      outline: none;
    }

    textarea::placeholder {
      color: #6b7280;
    }

    .button-main {
      width: 100%;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      background: #4f46e5;
      color: #e5e7eb;
      font-size: 14px;
      font-weight: 500;
      margin-top: 8px;
      cursor: pointer;
    }

    .button-main:active {
      transform: scale(0.97);
    }

    .log-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .log-row span {
      font-size: 12px;
    }

    .minutes-input {
      width: 80px;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      outline: none;
    }

    .encouragement {
      margin-top: 10px;
      font-size: 12px;
      color: #e5e7eb;
    }

    .encouragement-strong {
      font-weight: 600;
      color: #a5b4fc;
    }

    .footer-note {
      margin-top: 10px;
      font-size: 10px;
      color: #64748b;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="title">Choose Your Pain</div>
    <div class="identity">“My life moves forward when I choose pain on purpose.”</div>

    <!-- Mantra -->
    <div class="mantra-box">
      <div class="mantra-label">Mantra</div>
      <div class="mantra-text" id="mantraText">
        Most people train their brain all day to escape discomfort. You’re training yours to face it.
      </div>
      <button class="mantra-button" onclick="nextMantra()">New</button>
    </div>

    <!-- Scoreboard -->
    <div class="section-title">Your scoreboard</div>
    <div class="section-sub">
      Simple numbers that prove you’re not living like the majority.
    </div>
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-label">Current streak</div>
        <div class="stat-value" id="streakValue">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total pain days</div>
        <div class="stat-value" id="totalDaysValue">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total pain hours</div>
        <div class="stat-value" id="totalHoursValue">0.0</div>
      </div>
    </div>
    <div class="date-small" id="lastDateValue">Last completed: —</div>

    <!-- Today’s pain -->
    <div class="section-title">Today’s chosen pain</div>
    <div class="section-sub">
      One hard, useful thing. This matters more than any scroll.
    </div>
    <textarea id="painText"
      placeholder="Example: 60–90 minutes deep work with my phone in another room."></textarea>
    <div class="date-small" id="todayDisplay"></div>

    <!-- Log -->
    <div class="section-title" style="margin-top: 14px;">Log today</div>
    <div class="section-sub">
      How long did you actually do your chosen pain today?
    </div>
    <div class="log-row">
      <span>Minutes:</span>
      <input id="minutesInput" class="minutes-input" type="number" min="0" step="5" placeholder="e.g. 60" />
    </div>
    <button class="button-main" onclick="markTodayDone()">Save day & update counters</button>

    <!-- Encouragement -->
    <div class="encouragement" id="encouragementText">
      <span class="encouragement-strong">Perspective:</span>
      Most people never track a single hour of chosen discomfort. You’re already in a different category.
    </div>

    <div class="footer-note">
      Data is stored only on this device (localStorage). No accounts, no sync. Just you and the numbers.
    </div>
  </div>

  <script>
    // Storage keys
    const K_PAIN_TEXT = "painApp_todayText";
    const K_PAIN_DATE = "painApp_todayDate";
    const K_STREAK = "painApp_streak";
    const K_LAST_DONE = "painApp_lastDoneDate";
    const K_TOTAL_DAYS = "painApp_totalDays";
    const K_TOTAL_MIN = "painApp_totalMinutes";

    // Elements
    const painTextEl = document.getElementById("painText");
    const streakValueEl = document.getElementById("streakValue");
    const totalDaysValueEl = document.getElementById("totalDaysValue");
    const totalHoursValueEl = document.getElementById("totalHoursValue");
    const lastDateValueEl = document.getElementById("lastDateValue");
    const todayDisplayEl = document.getElementById("todayDisplay");
    const minutesInputEl = document.getElementById("minutesInput");
    const encouragementEl = document.getElementById("encouragementText");
    const mantraTextEl = document.getElementById("mantraText");

    // Mantras
    const mantras = [
      "Most people train their brain all day to escape discomfort. You’re training yours to face it.",
      "Comfort now is debt. Pain now is investment.",
      "The majority will live and die scrolling. You’re quietly doing the opposite.",
      "Almost nobody can tell you how many hours of chosen pain they’ve done. You can.",
      "You’re not trying to feel better. You’re trying to become someone better.",
      "Every honest minute of chosen struggle compounds in ways you won’t see until later.",
      "The difference between you and most people is what you choose when it’s uncomfortable.",
      "This isn’t punishment. This is you taking ownership of your life.",
      "Your future self is quietly watching what you choose today.",
      "Most people don’t track effort because it reminds them of their excuses. You’re tracking yours.",
      "Nobody will ever see most of these hours. You will live the result of them.",
      "One day of chosen pain means something. One hundred days makes you unrecognizable."
    ];

    const encouragements = [
      "Most people never track a single hour of chosen discomfort. You’re already in a different category.",
      "You’re not waiting for life to get easier. You’re getting stronger on purpose.",
      "Every day you log here is a day you refused to live on autopilot.",
      "These counters are quiet, but their impact won’t be.",
      "Total hours of chosen pain is a number very few people on earth could write honestly.",
      "You’re building a life most people won’t have by doing what most people don’t do."
    ];

    function randomFrom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function nextMantra() {
      mantraTextEl.textContent = randomFrom(mantras);
    }

    function setEncouragement() {
      encouragementEl.innerHTML =
        `<span class="encouragement-strong">Perspective:</span> ${randomFrom(encouragements)}`;
    }

    // Dates
    function getDateString(d) {
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}-${m}-${day}`;
    }

    function todayISO() {
      return getDateString(new Date());
    }

    function yesterdayISO() {
      const d = new Date();
      d.setDate(d.getDate() - 1);
      return getDateString(d);
    }

    function formatDisplayDate(iso) {
      if (!iso) return "Last completed: —";
      const [y, m, d] = iso.split("-");
      return `Last completed: ${d}/${m}/${y.slice(2)}`;
    }

    function updateTodayLabel() {
      const today = new Date();
      const opts = { weekday: "short", month: "short", day: "numeric", year: "numeric" };
      todayDisplayEl.textContent = "Today: " + today.toLocaleDateString(undefined, opts);
    }

    // Load state
    function loadState() {
      const today = todayISO();
      const storedPain = localStorage.getItem(K_PAIN_TEXT);
      const storedPainDate = localStorage.getItem(K_PAIN_DATE);

      if (storedPain && storedPainDate === today) {
        painTextEl.value = storedPain;
      } else {
        painTextEl.value = "";
      }

      const streak = parseInt(localStorage.getItem(K_STREAK) || "0", 10);
      const totalDays = parseInt(localStorage.getItem(K_TOTAL_DAYS) || "0", 10);
      const totalMin = parseInt(localStorage.getItem(K_TOTAL_MIN) || "0", 10);
      const lastDone = localStorage.getItem(K_LAST_DONE);

      streakValueEl.textContent = String(streak);
      totalDaysValueEl.textContent = String(totalDays);
      totalHoursValueEl.textContent = (totalMin / 60).toFixed(1);
      lastDateValueEl.textContent = formatDisplayDate(lastDone);

      minutesInputEl.value = "";
      updateTodayLabel();
      nextMantra();
      setEncouragement();
    }

    // Mark today as done
    function markTodayDone() {
      const minutes = parseInt(minutesInputEl.value || "0", 10);
      if (isNaN(minutes) || minutes <= 0) {
        alert("Add how many minutes you actually did today.");
        return;
      }

      const painText = painTextEl.value.trim();
      if (!painText) {
        if (!confirm("You didn’t write today’s chosen pain. Save anyway?")) {
          return;
        }
      } else {
        localStorage.setItem(K_PAIN_TEXT, painText);
        localStorage.setItem(K_PAIN_DATE, todayISO());
      }

      const today = todayISO();
      const yesterday = yesterdayISO();
      let streak = parseInt(localStorage.getItem(K_STREAK) || "0", 10);
      let totalDays = parseInt(localStorage.getItem(K_TOTAL_DAYS) || "0", 10);
      let totalMin = parseInt(localStorage.getItem(K_TOTAL_MIN) || "0", 10);
      const lastDone = localStorage.getItem(K_LAST_DONE);

      if (lastDone === today) {
        // Already counted as a day; just add minutes
      } else if (lastDone === yesterday) {
        streak += 1;
        totalDays += 1;
      } else {
        streak = 1;
        totalDays += 1;
      }

      totalMin += minutes;

      localStorage.setItem(K_STREAK, String(streak));
      localStorage.setItem(K_TOTAL_DAYS, String(totalDays));
      localStorage.setItem(K_TOTAL_MIN, String(totalMin));
      localStorage.setItem(K_LAST_DONE, today);

      streakValueEl.textContent = String(streak);
      totalDaysValueEl.textContent = String(totalDays);
      totalHoursValueEl.textContent = (totalMin / 60).toFixed(1);
      lastDateValueEl.textContent = formatDisplayDate(today);
      minutesInputEl.value = "";

      alert("Day logged. These minutes now belong to the version of you that moves forward.");
      setEncouragement();
    }

    // Init
    loadState();
  </script>
</body>
</html>
